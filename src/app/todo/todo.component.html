<div
  class="flex items-center mb-2"
  [ngClass]="{ 'bg-blue-100': selected, 'dark:bg-blue-900': selected }"
  (click)="select()"
>
  <ng-container *ngIf="!todo.editMode">
    <input
      type="checkbox"
      [checked]="todo.complete"
      (change)="toggleComplete()"
      class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded"
    />
    <span
      [ngClass]="{ 'line-through': todo.complete }"
      class="ml-3 text-gray-900 dark:text-gray-200"
      (click)="select()"
      contenteditable
      (focusout)="updateContent($event)"
    >
      {{ todo.content }}
    </span>
    <span
      *ngIf="todo.estimation"
      class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"
      [ngClass]="{ 'line-through': todo.complete }"
    >
      {{ todo.estimation }} mins
    </span>
    <span
      *ngIf="todo.dueDate"
      class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium"
      [ngClass]="{
        'bg-red-100 text-red-800': isBeforeToday(todo.dueDate),
        'dark:bg-red-800 dark:text-red-300': isBeforeToday(todo.dueDate),
        'bg-gray-100 text-neutral-800': !isBeforeToday(todo.dueDate),
        'dark:bg-gray-700 dark:text-gray-300': !isBeforeToday(todo.dueDate),
        'line-through': todo.complete
      }"
    >
      Due {{ todo.dueDate | date : "d MMM 'YY" }}
    </span>
  </ng-container>
  <ng-container *ngIf="todo.editMode">
    <input
      [(ngModel)]="todo.content"
      [ngModelOptions]="{ standalone: true }"
      (focusout)="updateContent($event)"
      class="ml-3 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent mr-3 text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800"
      placeholder="Enter todo content"
      required
    />
    <input
      [(ngModel)]="todo.estimation"
      [ngModelOptions]="{ standalone: true }"
      class="border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent mr-3 text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800"
      placeholder="Estimation (mins)"
      type="number"
      min="1"
    />
    <input
      [(ngModel)]="todo.dueDate"
      [ngModelOptions]="{ standalone: true }"
      class="border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent mr-3 text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800"
      placeholder="Due date"
      type="date"
    />
  </ng-container>
</div>
